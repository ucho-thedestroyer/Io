<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>top hits from the abyss</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="music-player">
    <div class="left-section">
      <img src="https://github.com/ucho-thedestroyer/Io/raw/Backup/docs/top/covers/IMG_0513.jpeg" alt="Album Cover" class="album-cover" />
    </div>
    <div class="controls-section">
      <div class="track-info">
        <span>Now Playing: <strong>Track Name</strong></span>
        <span class="track-length">00:00 / 03:45</span>
      </div>
      
    <audio id="audio-player" controls style="display:none;">
      <source id="audio-source" src="https://github.com/ucho-thedestroyer/Io/raw/Backup/top/space-boogie.mp3" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
    
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="player-controls">
      <button onclick="toggleDarkMode()">üåì</button>
      <button onclick="downloadCurrentTrack()">‚¨áÔ∏è Download</button>
      <button onclick="shareCurrentTrack()">üîó Share</button>
    
    
    
        <button onclick="prevTrack()">‚èÆ</button>
        <button onclick="playPause()">‚ñ∂Ô∏è</button>
        <button onclick="nextTrack()">‚è≠</button>
        <input type="range" min="0" max="100" value="50" class="volume-slider" />
      </div>
    </div>
    <div class="right-section">
      <div class="tip-container">
        <div class="gif-placeholder">
          
  
        </div>
        <a href="https://github.com/ucho-thedestroyer/Io/raw/Backup/docs/top/epilogue%20I.m4a">
             Tip 4 this track!
        </a><br>
        <b>And download its high quality FLAC.</b>
        <br>Your $upport helps me keep going.
      </div>
    </div> 
    </div>
  </div>
<!----------endof player--->
  <div class="lists-container">
    <div class="track-list">
      <h2>Track List</h2>
      <div class="track" onclick="addToQueue(this)">
        <div class="track-meta">
          <h4>Space Boogie</h4>
          <p>Length: 3:45 | Genre: Synthwave</p>
          <p class="desc">A groovy ride through cosmic sounds.</p>
        </div>
      </div>
      <div class="track" onclick="addToQueue(this)">
        <div class="track-meta">
          <h4>Neon Dreams</h4>
          <p>Length: 4:10 | Genre: Retro Pop</p>
          <p class="desc">A nostalgic dive into pulsing beats.</p>
        </div>
      </div>
    </div>
    <div class="queue-list">
      <h2>Queue</h2>
      <ul id="queue" class="queue-container"></ul>
    </div>
    <div class="poll">
      <div class="question"></div>
      <div class="answers"></div>
    </div>
  </div>
  <script>
 function prevTrack() {
  alert("Previous track");
}

function playPause() {
  alert("Play/Pause toggle");
}

function nextTrack() {
  alert("Next track");
}

let currentTrackIndex = 0;
const tracks = [
  {
    title: "Space Boogie",
    file: "https://github.com/ucho-thedestroyer/Io/raw/Backup/top/space-boogie.mp3"
  },
  {
    title: "Neon Dreams",
    file: "https://github.com/ucho-thedestroyer/Io/raw/Backup/top/neon-dreams.mp3"
  }
];

function playTrack(index) {
  const player = document.getElementById("audio-player");
  const source = document.getElementById("audio-source");
  currentTrackIndex = index;
  source.src = tracks[index].file;
  player.load();
  player.play();
}

function playPause() {
  const player = document.getElementById("audio-player");
  if (player.paused) {
    player.play();
  } else {
    player.pause();
  }
}

function nextTrack() {
  currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
  playTrack(currentTrackIndex);
}

function prevTrack() {
  currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
  playTrack(currentTrackIndex);
}

// Autoplay next track when current one ends
document.addEventListener("DOMContentLoaded", function () {
  const player = document.getElementById("audio-player");
  player.addEventListener("ended", nextTrack);
});

function updateProgress() {
  const player = document.getElementById("audio-player");
  const progressBar = document.getElementById("progress-bar");
  if (player && progressBar) {
    const percent = (player.currentTime / player.duration) * 100;
    progressBar.style.width = percent + "%";
  }
}

document.addEventListener("DOMContentLoaded", function () {
  const player = document.getElementById("audio-player");
  player.addEventListener("ended", nextTrack);
  player.addEventListener("timeupdate", updateProgress);
});

// Allow clicking on queue item to play
document.addEventListener("click", function (e) {
  if (e.target.closest(".queue-item")) {
    const title = e.target.closest(".queue-item").querySelector("strong").textContent;
    const index = tracks.findIndex(t => t.title === title);
    if (index !== -1) playTrack(index);
  }
});

function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");
}

function downloadCurrentTrack() {
  const current = tracks[currentTrackIndex];
  const a = document.createElement("a");
  a.href = current.file;
  a.download = current.title + ".mp3";
  a.click();
}

function shareCurrentTrack() {
  const current = tracks[currentTrackIndex];
  const dummy = document.createElement("input");
  const url = window.location.href + "#" + encodeURIComponent(current.title);
  document.body.appendChild(dummy);
  dummy.value = url;
  dummy.select();
  document.execCommand("copy");
  document.body.removeChild(dummy);
  alert("Track link copied!");
}

// Drag and drop reorder for queue
let dragSrcEl = null;

document.addEventListener("dragstart", function (e) {
  if (e.target.classList.contains("queue-item")) {
    dragSrcEl = e.target;
    e.dataTransfer.effectAllowed = "move";
    e.dataTransfer.setData("text/html", e.target.innerHTML);
    e.target.classList.add("dragging");
  }
});

document.addEventListener("dragover", function (e) {
  if (e.preventDefault) e.preventDefault();
  return false;
});

document.addEventListener("drop", function (e) {
  if (e.stopPropagation) e.stopPropagation();
  if (dragSrcEl && e.target.closest(".queue-item") !== dragSrcEl) {
    const target = e.target.closest(".queue-item");
    dragSrcEl.innerHTML = target.innerHTML;
    target.innerHTML = e.dataTransfer.getData("text/html");
  }
  return false;
});

document.addEventListener("dragend", function (e) {
  if (e.target.classList.contains("queue-item")) {
    e.target.classList.remove("dragging");
  }
});


function addToQueue(trackElement) {
  const title = trackElement.querySelector("h4").textContent;
  const meta = trackElement.querySelector("p").textContent;
  const desc = trackElement.querySelector(".desc").textContent;

  const queue = document.getElementById("queue");
  const li = document.createElement("li");
  li.className = "queue-item"; li.setAttribute("draggable", "true");
  li.innerHTML = \`
    <div>
      <strong>\${title}</strong><br/>
      <small>\${meta}</small><br/>
      <em>\${desc}</em>
    </div>
    <button class="remove-btn" onclick="removeFromQueue(this)">‚úñ</button>
  \`;
  queue.appendChild(li);
}

function removeFromQueue(button) {
  const item = button.parentElement;
  item.remove();
}

  </script>
  <script src="poll.js"></script>
  <script src="scr.js"></script>
  
</body>
</html>
