const player=document.getElementById("player"),bullets=document.getElementById("bullets"),enemies=document.getElementById("enemies"),sprite=document.getElementById("sprite"),bossElement=document.getElementById("boss"),shootSFX=document.getElementById("shoot-sfx");let posX=100,velY=0,isJumping=!1,gravity=.8,groundY=80,jumpPower=14,keys={},lives=3,score=0,bossHealth=10;for(let i=0;i<256;i++){const pixel=document.createElement("div");sprite.appendChild(pixel)}document.addEventListener("keydown",(e)=>{keys[e.key]=!0}),document.addEventListener("keyup",(e)=>{keys[e.key]=!1});function spawnEnemy(){const e=document.createElement("div");e.style.left=window.innerWidth+"px",enemies.appendChild(e);!function t(){const n=parseInt(e.style.left);n<-40?(e.remove(),decrementLives()):(e.style.left=n-2+"px",requestAnimationFrame(t))}()}function shoot(){shootSFX.currentTime=0,shootSFX.play();const e=document.createElement("div");e.style.left=posX+32+"px",e.style.bottom=player.style.bottom,bullets.appendChild(e);!function t(){const n=parseInt(e.style.left);n>window.innerWidth?e.remove():(e.style.left=n+8+"px",requestAnimationFrame(t))}()}function decrementLives(){--lives,updateUI(),lives<=0&&alert("Game Over!")}function incrementScore(){score+=100,updateUI()}function updateUI(){document.getElementById("lives").textContent=`Lives: ${lives}`,document.getElementById("score").textContent=`Score: ${score}`}function checkCollisions(){const e=document.querySelectorAll(".bullets div"),t=document.querySelectorAll(".enemies div"),n=bossElement.getBoundingClientRect();e.forEach((e=>{const o=e.getBoundingClientRect();t.forEach((t=>{const c=t.getBoundingClientRect();o.left<c.right&&o.right>c.left&&o.top<c.bottom&&o.bottom>c.top&&(e.remove(),t.remove(),incrementScore())})),o.left<n.right&&o.right>n.left&&o.top<n.bottom&&o.bottom>n.top&&(e.remove(),--bossHealth<=0&&(bossElement.remove(),alert("You defeated the final boss!")))}))}function update(){keys.ArrowRight&&(posX+=4),keys.ArrowLeft&&(posX-=4),keys.ArrowUp&&!isJumping&&(isJumping=!0,velY=jumpPower),keys[" "]&&(keys[" "]=!1,shoot()),isJumping&&(let e=parseInt(player.style.bottom||"80")+(velY-=gravity);player.style.bottom=e+"px",e<=groundY&&(player.style.bottom=groundY+"px",isJumping=!1,velY=0)),player.style.left=posX+"px",checkCollisions(),requestAnimationFrame(update)}setInterval(spawnEnemy,2e3),updateUI(),update();